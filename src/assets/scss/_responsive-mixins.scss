// ==========================================
// Responsive Design Mixins & Utilities
// Complete breakpoint system for DJJS Project
// ==========================================

// Standard Bootstrap 5 breakpoints (matching _variables.scss)
// xs: 0 (default, mobile-first)
// sm: 576px (landscape phones)
// md: 768px (tablets)
// lg: 992px (desktops)
// xl: 1200px (large desktops)
// xxl: 1400px (extra large desktops)

// ==========================================
// Breakpoint Mixins
// ==========================================

// Media query mixins for responsive design
@mixin respond-to($breakpoint) {
  @if $breakpoint == 'xs' {
    @media (max-width: 575.98px) { @content; }
  }
  @else if $breakpoint == 'sm' {
    @media (min-width: 576px) { @content; }
  }
  @else if $breakpoint == 'sm-only' {
    @media (min-width: 576px) and (max-width: 767.98px) { @content; }
  }
  @else if $breakpoint == 'md' {
    @media (min-width: 768px) { @content; }
  }
  @else if $breakpoint == 'md-only' {
    @media (min-width: 768px) and (max-width: 991.98px) { @content; }
  }
  @else if $breakpoint == 'lg' {
    @media (min-width: 992px) { @content; }
  }
  @else if $breakpoint == 'lg-only' {
    @media (min-width: 992px) and (max-width: 1199.98px) { @content; }
  }
  @else if $breakpoint == 'xl' {
    @media (min-width: 1200px) { @content; }
  }
  @else if $breakpoint == 'xl-only' {
    @media (min-width: 1200px) and (max-width: 1399.98px) { @content; }
  }
  @else if $breakpoint == 'xxl' {
    @media (min-width: 1400px) { @content; }
  }
  @else if $breakpoint == 'mobile' {
    @media (max-width: 767.98px) { @content; }
  }
  @else if $breakpoint == 'tablet' {
    @media (min-width: 768px) and (max-width: 991.98px) { @content; }
  }
  @else if $breakpoint == 'desktop' {
    @media (min-width: 992px) { @content; }
  }
}

// ==========================================
// Typography Responsive Mixins
// ==========================================

@mixin responsive-font-size($base-size, $scale-factor: 0.85) {
  font-size: $base-size;
  
  @include respond-to('xs') {
    font-size: calc(#{$base-size} * #{$scale-factor});
  }
}

// Fluid typography (scales between min and max based on viewport)
@mixin fluid-type($min-size, $max-size, $min-width: 320px, $max-width: 1400px) {
  font-size: $min-size;
  
  @media (min-width: $min-width) {
    font-size: calc(#{$min-size} + (#{strip-unit($max-size)} - #{strip-unit($min-size)}) * ((100vw - #{$min-width}) / (#{strip-unit($max-width)} - #{strip-unit($min-width)})));
  }
  
  @media (min-width: $max-width) {
    font-size: $max-size;
  }
}

// Helper function to remove units from values
@function strip-unit($value) {
  @return $value / ($value * 0 + 1);
}

// ==========================================
// Spacing Responsive Mixins
// ==========================================

// Responsive padding
@mixin responsive-padding($top, $right: $top, $bottom: $top, $left: $right) {
  padding: $top $right $bottom $left;
  
  @include respond-to('xs') {
    padding: calc(#{$top} * 0.75) calc(#{$right} * 0.75) calc(#{$bottom} * 0.75) calc(#{$left} * 0.75);
  }
}

// Responsive margin
@mixin responsive-margin($top, $right: $top, $bottom: $top, $left: $right) {
  margin: $top $right $bottom $left;
  
  @include respond-to('xs') {
    margin: calc(#{$top} * 0.75) calc(#{$right} * 0.75) calc(#{$bottom} * 0.75) calc(#{$left} * 0.75);
  }
}

// ==========================================
// Container Responsive Mixins
// ==========================================

// Responsive container with max-width
@mixin responsive-container($max-width: 1320px) {
  width: 100%;
  max-width: $max-width;
  margin-left: auto;
  margin-right: auto;
  padding-left: 1rem;
  padding-right: 1rem;
  
  @include respond-to('xs') {
    padding-left: 0.75rem;
    padding-right: 0.75rem;
  }
}

// ==========================================
// Flexbox Responsive Mixins
// ==========================================

// Responsive flex direction
@mixin responsive-flex($direction: row, $mobile-direction: column) {
  display: flex;
  flex-direction: $direction;
  
  @include respond-to('xs') {
    flex-direction: $mobile-direction;
  }
}

// Responsive grid
@mixin responsive-grid($columns, $gap: 1rem, $mobile-columns: 1) {
  display: grid;
  grid-template-columns: repeat($columns, 1fr);
  gap: $gap;
  
  @include respond-to('md') {
    grid-template-columns: repeat(max(#{$mobile-columns}, 2), 1fr);
  }
  
  @include respond-to('xs') {
    grid-template-columns: repeat($mobile-columns, 1fr);
    gap: calc(#{$gap} * 0.75);
  }
}

// ==========================================
// Component Responsive Mixins
// ==========================================

// Touch-friendly tap targets (44x44px minimum)
@mixin tap-target($min-size: 44px) {
  @include respond-to('mobile') {
    min-width: $min-size;
    min-height: $min-size;
    display: inline-flex;
    align-items: center;
    justify-content: center;
  }
}

// Responsive card
@mixin responsive-card {
  padding: 1.5rem;
  border-radius: 0.5rem;
  
  @include respond-to('md') {
    padding: 1.25rem;
  }
  
  @include respond-to('xs') {
    padding: 1rem;
    border-radius: 0.375rem;
  }
}

// Responsive button
@mixin responsive-button {
  padding: 0.625rem 1rem;
  font-size: 0.9375rem;
  
  @include respond-to('xs') {
    padding: 0.75rem 1.25rem;
    font-size: 1rem;
    width: 100%;
    min-height: 44px;
  }
}

// ==========================================
// Table Responsive Mixins
// ==========================================

// Responsive table (stacked on mobile)
@mixin responsive-table-stacked {
  @include respond-to('mobile') {
    thead {
      display: none;
    }
    
    tbody {
      tr {
        display: block;
        margin-bottom: 1rem;
        border: 1px solid var(--bs-border-color);
        border-radius: 0.375rem;
        padding: 0.75rem;
        
        td {
          display: flex;
          justify-content: space-between;
          padding: 0.5rem 0;
          border: none;
          
          &::before {
            content: attr(data-label);
            font-weight: 600;
            margin-right: 1rem;
            color: var(--bs-secondary-color);
          }
        }
      }
    }
  }
}

// Responsive table (horizontal scroll)
@mixin responsive-table-scroll {
  @include respond-to('mobile') {
    display: block;
    width: 100%;
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
    
    table {
      min-width: 600px;
    }
  }
}

// ==========================================
// Form Responsive Mixins
// ==========================================

// Responsive form
@mixin responsive-form {
  .form-control,
  .form-select {
    @include respond-to('xs') {
      font-size: 16px; // Prevent iOS zoom
      min-height: 44px;
      padding: 0.625rem 0.75rem;
    }
  }
  
  .form-label {
    @include respond-to('xs') {
      font-size: 0.875rem;
    }
  }
  
  .btn {
    @include responsive-button;
  }
}

// ==========================================
// Modal Responsive Mixins
// ==========================================

// Responsive modal
@mixin responsive-modal {
  @include respond-to('xs') {
    margin: 0.5rem;
    max-width: calc(100% - 1rem);
    
    .modal-header,
    .modal-body,
    .modal-footer {
      padding: 1rem;
    }
    
    .modal-footer {
      flex-direction: column-reverse;
      gap: 0.5rem;
      
      .btn {
        width: 100%;
        margin: 0;
      }
    }
  }
}

// ==========================================
// Navigation Responsive Mixins
// ==========================================

// Responsive navigation
@mixin responsive-nav {
  @include respond-to('mobile') {
    flex-direction: column;
    
    .nav-link {
      padding: 0.75rem 1rem;
      width: 100%;
      min-height: 44px;
    }
  }
}

// ==========================================
// Utility Mixins
// ==========================================

// Hide on mobile
@mixin hide-mobile {
  @include respond-to('mobile') {
    display: none !important;
  }
}

// Show only on mobile
@mixin show-mobile-only {
  display: none !important;
  
  @include respond-to('mobile') {
    display: block !important;
  }
}

// Responsive visibility
@mixin visible-on($breakpoint) {
  display: none !important;
  
  @include respond-to($breakpoint) {
    display: block !important;
  }
}

// Prevent text wrapping on small screens
@mixin text-ellipsis-mobile {
  @include respond-to('xs') {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }
}

// Word break on mobile
@mixin word-break-mobile {
  @include respond-to('xs') {
    word-break: break-word;
    overflow-wrap: anywhere;
  }
}

// ==========================================
// Animation & Performance Mixins
// ==========================================

// Hardware acceleration
@mixin hardware-accelerate {
  transform: translateZ(0);
  -webkit-transform: translateZ(0);
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
  will-change: transform;
}

// Smooth transition
@mixin smooth-transition($properties: all, $duration: 0.3s, $timing: cubic-bezier(0.4, 0, 0.2, 1)) {
  transition: $properties $duration $timing;
  will-change: $properties;
}

// Reduce motion (accessibility)
@mixin respect-motion-preference {
  @media (prefers-reduced-motion: reduce) {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

// ==========================================
// Print Responsive Mixins
// ==========================================

// Print styles
@mixin print-styles {
  @media print {
    @content;
  }
}

// Hide on print
@mixin hide-print {
  @media print {
    display: none !important;
  }
}

// ==========================================
// Orientation Mixins
// ==========================================

// Portrait orientation
@mixin portrait {
  @media (orientation: portrait) {
    @content;
  }
}

// Landscape orientation
@mixin landscape {
  @media (orientation: landscape) {
    @content;
  }
}

// ==========================================
// High-DPI/Retina Mixins
// ==========================================

// Retina displays
@mixin retina {
  @media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
    @content;
  }
}

// ==========================================
// Dark Mode Mixins (Future-proofing)
// ==========================================

// Dark mode
@mixin dark-mode {
  @media (prefers-color-scheme: dark) {
    @content;
  }
}

// Light mode
@mixin light-mode {
  @media (prefers-color-scheme: light) {
    @content;
  }
}

