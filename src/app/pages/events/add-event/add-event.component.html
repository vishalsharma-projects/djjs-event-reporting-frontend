<div class="row">
  <div class="col-12">
    <div class="page-title-box d-flex align-items-center justify-content-between">
      <div class="d-flex align-items-center">
        <button class="btn btn-link text-decoration-none me-3" (click)="goBack()">
          <i class="fas fa-arrow-left"></i>
        </button>
        <h4 class="mb-0">ADD EVENT</h4>
      </div>
    </div>
  </div>
</div>

<!-- Stepper Progress -->
<div class="row mb-4">
  <div class="col-12">
    <div class="stepper-progress">
      <div class="step" [class.active]="currentStep === 1" [class.completed]="currentStep > 1">
        <div class="step-number">
          <i class="fas fa-check" *ngIf="currentStep > 1"></i>
          <span *ngIf="currentStep <= 1">1</span>
        </div>
        <div class="step-label">General Details</div>
      </div>
      <div class="step" [class.active]="currentStep === 2" [class.completed]="currentStep > 2">
        <div class="step-number">
          <i class="fas fa-check" *ngIf="currentStep > 2"></i>
          <span *ngIf="currentStep <= 2">2</span>
        </div>
        <div class="step-label">Media & promotion</div>
      </div>
      <div class="step" [class.active]="currentStep === 3">
        <div class="step-number">3</div>
        <div class="step-label">Involved participants</div>
      </div>
    </div>
  </div>
</div>

<!-- Success and Error Messages -->
<div class="row mb-3" *ngIf="successMessage || errorMessage">
  <div class="col-12">
    <div *ngIf="successMessage" class="alert alert-success alert-dismissible fade show" role="alert">
      <i class="fas fa-check-circle me-2"></i>
      {{ successMessage }}
      <button type="button" class="btn-close" (click)="successMessage = ''"></button>
    </div>
    <div *ngIf="errorMessage" class="alert alert-danger alert-dismissible fade show" role="alert">
      <i class="fas fa-exclamation-circle me-2"></i>
      {{ errorMessage }}
      <button type="button" class="btn-close" (click)="errorMessage = ''"></button>
    </div>
  </div>
</div>

<!-- Mock Data Buttons -->
<div class="row mb-4">
  <div class="col-12">
    <div class="card border-primary">
      <div class="card-header bg-primary text-white">
        <h6 class="mb-0">
          <i class="fas fa-database me-2"></i>üéØ MOCK DATA FOR TESTING - CLICK ANY BUTTON BELOW
        </h6>
      </div>
      <div class="card-body">
        <div class="row">
          <div class="col-md-4 mb-3">
            <h6 class="text-primary mb-2">Quick Fill Options:</h6>
            <button type="button" class="btn btn-outline-info btn-sm me-2 mb-2" (click)="fillWithSampleData()">
              <i class="fas fa-magic me-1"></i>Sample Data
            </button>
            <button type="button" class="btn btn-outline-warning btn-sm mb-2" (click)="fillWithRandomMockData()">
              <i class="fas fa-random me-1"></i>Random Data
            </button>
          </div>
          <div class="col-md-4 mb-3">
            <h6 class="text-primary mb-2">Event Type Quick Fill:</h6>
            <div class="btn-group-vertical d-block">
              <button type="button" class="btn btn-outline-primary btn-sm mb-1" (click)="quickFillEventType('spiritual')">
                üïâÔ∏è Spiritual Event
              </button>
              <button type="button" class="btn btn-outline-primary btn-sm mb-1" (click)="quickFillEventType('cultural')">
                üé≠ Cultural Event
              </button>
              <button type="button" class="btn btn-outline-primary btn-sm mb-1" (click)="quickFillEventType('educational')">
                üìö Educational Event
              </button>
            </div>
          </div>
          <div class="col-md-4 mb-3">
            <h6 class="text-primary mb-2">Form Management:</h6>
            <button type="button" class="btn btn-outline-danger btn-sm" (click)="clearAllForms()">
              <i class="fas fa-trash me-1"></i>Clear All Forms
            </button>
          </div>
        </div>
        <div class="alert alert-info mt-2">
          <i class="fas fa-info-circle me-2"></i>
          <strong>Instructions:</strong> Click any button above to automatically fill the forms with mock data for testing!
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Mock Data Preview -->
<div class="row mb-4">
  <div class="col-12">
    <div class="card">
      <div class="card-header">
        <h6 class="mb-0">
          <i class="fas fa-eye me-2"></i>Mock Data Preview
        </h6>
      </div>
      <div class="card-body">
        <div class="table-responsive">
          <table class="table table-sm table-striped">
            <thead class="table-light">
              <tr>
                <th>ID</th>
                <th>Event Name</th>
                <th>Type</th>
                <th>Scale</th>
                <th>Location</th>
                <th>Duration</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let event of mockEvents">
                <td><span class="badge bg-secondary">{{ event.id }}</span></td>
                <td>{{ event.eventName }}</td>
                <td><span class="badge bg-info">{{ event.eventType }}</span></td>
                <td>{{ event.scale }}</td>
                <td>{{ event.city }}, {{ event.state }}</td>
                <td>{{ event.duration }}</td>
              </tr>
            </tbody>
          </table>
        </div>
        <small class="text-muted">
          <i class="fas fa-info-circle me-1"></i>
          Showing {{ mockEvents.length }} mock events available for testing
        </small>
      </div>
    </div>
  </div>
</div>

<!-- Event Form -->
<div class="container-fluid">
  <div class="row">
    <div class="col-12">
      <div class="card">
        <div class="card-header">
          <h4 class="card-title mb-0">Add New Event</h4>
        </div>
        <div class="card-body">
          <!-- Step 1: Basic Event Details -->
          <div *ngIf="currentStep === 1">
            <h5 class="mb-4">Basic Event Details</h5>
            <form [formGroup]="generalDetailsForm">
              <div class="row">
                <div class="col-md-6 mb-3">
                  <label class="form-label">Event Name <span class="text-danger">*</span></label>
                  <input type="text" class="form-control" formControlName="eventName" placeholder="Enter event name">
                </div>
                <div class="col-md-6 mb-3">
                  <label class="form-label">Event Type <span class="text-danger">*</span></label>
                  <select class="form-select" formControlName="eventType">
                    <option value="">Select Event Type</option>
                    <option *ngFor="let type of eventTypes" [value]="type">{{type}}</option>
                  </select>
                </div>
              </div>

              <div class="row">
                <div class="col-md-6 mb-3">
                  <label class="form-label">Katha Type</label>
                  <select class="form-select" formControlName="kathaType">
                    <option value="">Select Katha Type</option>
                    <option *ngFor="let type of kathaTypes" [value]="type">{{type}}</option>
                  </select>
                </div>
                <div class="col-md-6 mb-3">
                  <label class="form-label">Scale</label>
                  <select class="form-select" formControlName="scale">
                    <option value="">Select Scale</option>
                    <option *ngFor="let scale of scales" [value]="scale">{{scale}}</option>
                  </select>
                </div>
              </div>

              <div class="row">
                <div class="col-md-6 mb-3">
                  <label class="form-label">Duration</label>
                  <input type="text" class="form-control" formControlName="duration" placeholder="dd MMM yyyy - dd MMM, yyyy">
                </div>
                <div class="col-md-6 mb-3">
                  <label class="form-label">Daily Start Time</label>
                  <select class="form-select" formControlName="dailyStartTime">
                    <option value="">Select Time</option>
                    <option value="06:00">6:00 AM</option>
                    <option value="07:00">7:00 AM</option>
                    <option value="08:00">8:00 AM</option>
                    <option value="17:30">5:30 PM</option>
                    <option value="18:00">6:00 PM</option>
                    <option value="19:00">7:00 PM</option>
                  </select>
                </div>
              </div>

              <div class="row">
                <div class="col-md-6 mb-3">
                  <label class="form-label">Daily End Time</label>
                  <select class="form-select" formControlName="dailyEndTime">
                    <option value="">Select Time</option>
                    <option value="07:30">7:30 AM</option>
                    <option value="08:30">8:30 AM</option>
                    <option value="09:30">9:30 AM</option>
                    <option value="19:30">7:30 PM</option>
                    <option value="20:30">8:30 PM</option>
                    <option value="21:30">9:30 PM</option>
                  </select>
                </div>
                <div class="col-md-6 mb-3">
                  <label class="form-label">Spiritual Orator</label>
                  <select class="form-select" formControlName="spiritualOrator">
                    <option value="">Select Orator</option>
                    <option value="dr-anya-sharma">Dr. Anya Sharma</option>
                    <option value="mr-rohan-verma">Mr. Rohan Verma</option>
                    <option value="swami-ji">Swami Ji</option>
                  </select>
                </div>
              </div>

              <div class="row">
                <div class="col-md-6 mb-3">
                  <label class="form-label">Country</label>
                  <select class="form-select" formControlName="country">
                    <option value="">Select Country</option>
                    <option *ngFor="let country of countries" [value]="country">{{country}}</option>
                  </select>
                </div>
                <div class="col-md-6 mb-3">
                  <label class="form-label">State</label>
                  <select class="form-select" formControlName="state">
                    <option value="">Select State</option>
                    <option *ngFor="let state of states" [value]="state">{{state}}</option>
                  </select>
                </div>
              </div>

              <div class="row">
                <div class="col-md-6 mb-3">
                  <label class="form-label">City</label>
                  <select class="form-select" formControlName="city">
                    <option value="">Select City</option>
                    <option *ngFor="let city of cities" [value]="city">{{city}}</option>
                  </select>
                </div>
                <div class="col-md-6 mb-3">
                  <label class="form-label">Address</label>
                  <input type="text" class="form-control" formControlName="address" placeholder="Enter address">
                </div>
              </div>

              <div class="row">
                <div class="col-md-6 mb-3">
                  <label class="form-label">Area Covered</label>
                  <input type="text" class="form-control" formControlName="areaCovered" placeholder="0.00 Sq km">
                </div>
                <div class="col-md-6 mb-3">
                  <label class="form-label">Pincode</label>
                  <input type="text" class="form-control" formControlName="pincode" placeholder="Enter pincode">
                </div>
              </div>
            </form>
          </div>

          <!-- Step 2: Media & Promotion -->
          <div *ngIf="currentStep === 2">
            <h5 class="mb-4">Media & Promotion</h5>
            <form [formGroup]="mediaPromotionForm">
              <div class="row">
                <div class="col-md-6 mb-3">
                  <label class="form-label">Media Coverage Type</label>
                  <select class="form-select" formControlName="mediaCoverageType">
                    <option value="">Select Type</option>
                    <option *ngFor="let type of mediaCoverageTypes" [value]="type">{{type}}</option>
                  </select>
                </div>
                <div class="col-md-6 mb-3">
                  <label class="form-label">Organization Name</label>
                  <input type="text" class="form-control" formControlName="organizationName" placeholder="Enter organization name">
                </div>
              </div>

              <div class="row">
                <div class="col-md-6 mb-3">
                  <label class="form-label">Media Email</label>
                  <select class="form-select" formControlName="mediaEmail">
                    <option value="">Select Email</option>
                    <option value="info&#64;example.com">info&#64;example.com</option>
                    <option value="media&#64;example.com">media&#64;example.com</option>
                  </select>
                </div>
                <div class="col-md-6 mb-3">
                  <label class="form-label">Media Website</label>
                  <input type="text" class="form-control" formControlName="mediaWebsite" placeholder="Enter website">
                </div>
              </div>

              <div class="row">
                <div class="col-md-4 mb-3">
                  <label class="form-label">Prefix</label>
                  <select class="form-select" formControlName="prefix">
                    <option value="">Select</option>
                    <option *ngFor="let prefix of prefixes" [value]="prefix">{{prefix}}</option>
                  </select>
                </div>
                <div class="col-md-4 mb-3">
                  <label class="form-label">First Name</label>
                  <input type="text" class="form-control" formControlName="firstName" placeholder="Enter first name">
                </div>
                <div class="col-md-4 mb-3">
                  <label class="form-label">Last Name</label>
                  <input type="text" class="form-control" formControlName="lastName" placeholder="Enter last name">
                </div>
              </div>
            </form>
          </div>

          <!-- Step 3: Involved Participants -->
          <div *ngIf="currentStep === 3">
            <h5 class="mb-4">Involved Participants</h5>
            <form [formGroup]="involvedParticipantsForm">
              <div class="row">
                <div class="col-md-4 mb-3">
                  <label class="form-label">Beneficiaries - Men</label>
                  <input type="number" class="form-control" formControlName="beneficiariesMen" min="0" placeholder="Enter number">
                </div>
                <div class="col-md-4 mb-3">
                  <label class="form-label">Beneficiaries - Women</label>
                  <input type="number" class="form-control" formControlName="beneficiariesWomen" min="0" placeholder="Enter number">
                </div>
                <div class="col-md-4 mb-3">
                  <label class="form-label">Beneficiaries - Children</label>
                  <input type="number" class="form-control" formControlName="beneficiariesChildren" min="0" placeholder="Enter number">
                </div>
              </div>

              <div class="row">
                <div class="col-md-4 mb-3">
                  <label class="form-label">Initiation - Men</label>
                  <input type="number" class="form-control" formControlName="initiationMen" min="0" placeholder="Enter number">
                </div>
                <div class="col-md-4 mb-3">
                  <label class="form-label">Initiation - Women</label>
                  <input type="number" class="form-control" formControlName="initiationWomen" min="0" placeholder="Enter number">
                </div>
                <div class="col-md-4 mb-3">
                  <label class="form-label">Initiation - Children</label>
                  <input type="number" class="form-control" formControlName="initiationChildren" min="0" placeholder="Enter number">
                </div>
              </div>
            </form>
          </div>

          <!-- Navigation Buttons -->
          <div class="d-flex justify-content-between mt-4">
            <button type="button" class="btn btn-outline-primary" (click)="previousStep()" *ngIf="currentStep > 1">
              <i class="fas fa-arrow-left me-2"></i>Previous
            </button>
            <button type="button" class="btn btn-primary" (click)="nextStep()" *ngIf="currentStep < totalSteps">
              Next<i class="fas fa-arrow-right ms-2"></i>
            </button>
            <button type="button" class="btn btn-success" (click)="onSubmit()" *ngIf="currentStep === totalSteps">
              <i class="fas fa-check me-2"></i>Submit Event
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Footer Actions -->
<div class="row mt-4">
  <div class="col-12">
    <div class="d-flex justify-content-between align-items-center">
      <div class="text-success">
        <i class="fas fa-check me-2"></i>All changes are autosaved
      </div>
      <div class="d-flex gap-2">
        <button type="button" class="btn btn-outline-primary" (click)="previousStep()" *ngIf="currentStep > 1">
          Back
        </button>
        <button type="button" class="btn btn-primary" (click)="onSubmit()">
          <span *ngIf="currentStep < totalSteps">Next</span>
          <span *ngIf="currentStep === totalSteps">Mark complete</span>
        </button>
      </div>
    </div>
  </div>
</div>