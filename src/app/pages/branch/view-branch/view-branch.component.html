<app-page-title [title]="'Branch Details'" [breadcrumbItems]="breadCrumbItems"></app-page-title>

<div class="row" *ngIf="!loading && branch">
  <div class="col-12">
    <div class="card">
      <div class="card-body">
        <!-- Branch Header -->
        <div class="d-flex justify-content-between align-items-center mb-3">
          <div>
            <h4 class="mb-1">{{ branch.name }}</h4>
            <p class="text-muted mb-0">
              <span *ngIf="branch.email">{{ branch.email }}</span>
              <span *ngIf="branch.email && branch.coordinator_name"> â€¢ </span>
              <span *ngIf="branch.coordinator_name">Coordinator: {{ branch.coordinator_name }}</span>
            </p>
          </div>
          <div class="d-flex gap-2">
            <button class="btn btn-outline-primary btn-sm" (click)="editBranch()">
              <i class="fas fa-edit me-1"></i>Edit
            </button>
            <button class="btn btn-outline-danger btn-sm" (click)="deleteBranch()">
              <i class="fas fa-trash me-1"></i>Delete
            </button>
          </div>
        </div>

        <!-- Tabs -->
        <ul class="nav nav-tabs nav-tabs-custom mb-3" role="tablist">
          <li class="nav-item">
            <button class="nav-link" [ngClass]="{'active': activeTab === 'details'}" (click)="setActiveTab('details')" type="button">
              Branch Details
            </button>
          </li>
          <li class="nav-item">
            <button class="nav-link" [ngClass]="{'active': activeTab === 'members'}" (click)="setActiveTab('members')" type="button">
              Members
            </button>
          </li>
        </ul>

        <!-- Tab Content -->
        <div class="tab-content">
          <div class="tab-pane" [ngClass]="{'show active': activeTab === 'details'}">
            <app-branch-details [branch]="branch"></app-branch-details>
          </div>
          <div class="tab-pane" [ngClass]="{'show active': activeTab === 'members'}">
            <app-branch-members-list [branchId]="branchId"></app-branch-members-list>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Loading State -->
<div class="row" *ngIf="loading">
  <div class="col-12 text-center p-5">
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
    <p class="mt-3">Loading branch details...</p>
  </div>
</div>

<!-- Error State -->
<div class="row" *ngIf="!loading && !branch">
  <div class="col-12">
    <div class="alert alert-danger" role="alert">
      Branch not found or failed to load.
    </div>
  </div>
</div>

<p-toast></p-toast>

